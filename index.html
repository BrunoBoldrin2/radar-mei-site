<!DOCTYPE html>
<html>
<head>
  <title>Radar MEI</title>
  <meta charset="UTF-8">
</head>

<body style="font-family: Arial; text-align:center; margin-top:50px;">

<h1>Radar MEI</h1>
<p>Descubra se você vai ultrapassar o limite do MEI</p>

<input id="valor" type="number" placeholder="Faturamento mensal" />
<br><br>

<button onclick="analisar()">Analisar risco</button>

<div id="resultado" style="
  margin-top:30px;
  font-size:22px;
  font-weight:bold;
  padding:20px;
  border-radius:10px;
  display:inline-block;
"></div>

<script>
async function analisar() {

  const valor = document.getElementById("valor").value;

  const resposta = await fetch(
    "https://radar-mei-api-production.up.railway.app/simular?valor=" + valor
  );

  const dados = await resposta.json();

  let cor = "#4CAF50"; // verde padrão

  if (dados.risco === "moderado") {
    cor = "#FFC107"; // amarelo
  }

  if (dados.risco === "alto") {
    cor = "#F44336"; // vermelho
  }

  const box = document.getElementById("resultado");

  box.style.backgroundColor = cor;
  box.style.color = "white";

  box.innerHTML =
    "Risco: " + dados.risco.toUpperCase() +
    "<br>Projeção anual: R$ " + dados.projecao_anual +
    "<br>Uso do limite: " + dados.percentual_limite + "%";
}
</script>

  

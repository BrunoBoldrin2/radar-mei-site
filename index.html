<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MEI Seguro ‚Äî Monitoramento Inteligente do Limite MEI</title>

<p id="contadorMEI" style="
font-size:14px;
color:#6b7280;
margin-top:-10px;
">
Carregando atividade...
</p>


<style>

body{
  font-family: Arial, sans-serif;
  margin:0;
  background:#f5f7fb;
  color:#222;
}

.container{
  max-width:1100px;
  margin:0 auto;        /* CENTRALIZA A P√ÅGINA */
  padding:40px 20px;    /* RESPIRO LATERAL */
  text-align:center;
}

.section-box{
  margin-top:80px;
  padding:60px 30px;
  background:#ffffff;
  border-radius:14px;
  box-shadow:0 8px 30px rgba(0,0,0,0.05);
}


h1{
  font-size:42px;
  margin-bottom:10px;
}

.subtitle{
  font-size:20px;
  color:#555;
  margin-bottom:40px;
}

.card{
  background:white;
  padding:30px;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,0.08);
}

input{
  padding:15px;
  font-size:18px;
  width:250px;
  border-radius:8px;
  border:1px solid #ccc;
}

button{
  margin-top:20px;
  padding:15px 25px;
  font-size:18px;
  border:none;
  border-radius:8px;
  background:#2563eb;
  color:white;
  cursor:pointer;
}

button:hover{
  background:#1d4ed8;
}

.resultado{
  margin-top:25px;
  padding:20px;
  border-radius:10px;
  font-size:20px;
  font-weight:bold;
}

.features{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  margin-top:50px;
}

.feature{
  background:white;
  padding:22px;
  border-radius:12px;
  box-shadow:0 6px 18px rgba(0,0,0,0.06);
  text-align:center;
}



.cta{
  margin-top:60px;
  padding:40px;
  background:#2563eb;
  color:white;
  border-radius:14px;
}

.cta button{
  background:white;
  color:#2563eb;
  font-weight:bold;
}

.loading{
  margin-top:10px;
  display:none;
  font-weight:bold;
}

.feature:hover{
  transform:translateY(-3px);
  transition:0.2s;
}

.trust-bar{
  margin-top:25px;
  display:flex;
  justify-content:center;
  gap:40px;
  flex-wrap:wrap;
  font-size:14px;
  color:#555;
}

.trust-item{
  display:flex;
  align-items:center;
  gap:6px;
}

.feature-row{
  margin-top:60px;
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:25px;
  max-width:1000px;
  margin-left:auto;
  margin-right:auto;
}

@media (max-width: 900px){
  .info-grid{
    grid-template-columns:1fr;
  }
}
  


@media (max-width: 900px){
  .feature-row{
    grid-template-columns:1fr;
  }
}

.info-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:60px;
  max-width:1000px;
  margin:auto;
  text-align:left;
  align-items:start;
}

.info-cta{
  grid-column:1 / -1;
  background:#f8fafc;
  padding:30px;
  border-radius:12px;
  border:1px solid #e5e7eb;
}

.mei-radar{
  margin-top:25px;
  text-align:center;
}

.radar-label{
  font-size:14px;
  color:#6b7280;
  margin-bottom:12px;
}

.radar-track{
  position:relative;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#e5e7eb;
  border-radius:999px;
  padding:14px 18px;
  overflow:hidden;
}

.radar-step{
  font-size:13px;
  display:flex;
  flex-direction:column;
  align-items:center;
  z-index:2;
}

.radar-step span{
  margin-top:4px;
}

#radarProgress{
  position:absolute;
  left:0;
  top:0;
  height:100%;
  width:0%;
  background:linear-gradient(
    90deg,
    #22c55e,
    #f59e0b,
    #ef4444
  );
  border-radius:999px;
  transition:width 1.2s ease;
  z-index:1;
  opacity:0.25;
}

.diagnostico{
  margin-top:18px;
  text-align:left;
  max-width:420px;
  margin-left:auto;
  margin-right:auto;
  display:none;
}

.diag-linha{
  opacity:0;
  padding:6px 0;
  font-size:14px;
  color:#374151;
  animation: aparecer 0.6s forwards;
}

@keyframes aparecer{
  from{
    opacity:0;
    transform:translateY(6px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}
  
#emailModal{
  z-index:9999;
}

#emailModal > div{
  position:relative;
  z-index:10000;
}


</style>
</head>

<body>

<div class="container">

<h1>MEI Seguro</h1>
<p class="subtitle">
Descubra antes se voc√™ vai ultrapassar o limite do MEI.
</p>

<p style="
font-size:14px;
color:#6b7280;
margin-top:-20px;
margin-bottom:30px;
">
Mais de <b>300 simula√ß√µes realizadas esta semana</b> por MEIs que querem evitar impostos inesperados.
</p>
  

<div class="card">

<h2>Simule seu risco agora</h2>

<input id="valor" type="text" placeholder="Faturamento mensal (R$)">

<br>

<button id="botao" onclick="analisar()">Analisar risco</button>

<div id="diagnosticoIA" class="diagnostico">
  <div class="diag-linha">üîé Analisando crescimento mensal...</div>
  <div class="diag-linha">üìä Calculando proje√ß√£o anual...</div>
  <div class="diag-linha">‚ö†Ô∏è Verificando risco fiscal...</div>
</div>
  

<p id="loading" class="loading">Analisando sua situa√ß√£o...</p>

 
  
<div id="resultado" class="resultado"></div>

  <div class="mei-radar">

  <div class="radar-label">
    Como funciona o risco do MEI ao longo do ano
  </div>

  <div class="radar-track">

    <div class="radar-step safe">
      üü¢
      <span>Seguro</span>
    </div>

    <div class="radar-step attention">
      üü°
      <span>Aten√ß√£o</span>
    </div>

    <div class="radar-step risk">
      üî¥
      <span>Risco alto</span>
    </div>

    <div class="radar-step danger">
      üö®
      <span>Estouro</span>
    </div>

    <div id="radarProgress"></div>

  </div>

</div>


<p style="font-size:12px; color:#666; margin-top:10px;">
‚ö†Ô∏è Esta simula√ß√£o √© apenas uma estimativa informativa baseada nos dados informados.
N√£o substitui orienta√ß√£o cont√°bil profissional.
</p>


</div>

<div class="trust-bar">
  <div class="trust-item">üîí Seus dados n√£o s√£o compartilhados</div>
  <div class="trust-item">üõ°Ô∏è N√£o acessamos dados da Receita Federal</div>
  <div class="trust-item">‚úÖ Simula√ß√£o gratuita e sem compromisso</div>
</div>


  
<div class="section-box">


<div class="info-grid">


<!-- COLUNA 1 -->
<div>
<h2 style="margin-bottom:15px;">
Por que muitos MEIs ultrapassam o limite?
</h2>

<p style="color:#444;line-height:1.7;">
A maioria acompanha apenas o faturamento mensal,
mas o limite do MEI √© anual. Pequenos aumentos nas vendas
podem fazer o faturamento ultrapassar o permitido sem perceber.
</p>

<p style="color:#444;line-height:1.7;margin-top:12px;">
Isso pode gerar impostos retroativos, mudan√ßa de regime
e custos inesperados que afetam diretamente o caixa do neg√≥cio.
</p>
</div>

<!-- COLUNA 2 -->
<div>
<h2 style="margin-bottom:15px;">
Como o MEI Seguro ajuda
</h2>

<ul style="color:#444;line-height:1.9;padding-left:18px;">
<li>‚úî Analisa automaticamente seu faturamento</li>
<li>‚úî Calcula proje√ß√µes antes do risco acontecer</li>
<li>‚úî Envia alertas preventivos por e-mail</li>
<li>‚úî Ajuda decis√µes antes de ultrapassar o limite</li>
</ul>
</div>

<!-- COLUNA 3 -->
<div  class="info-cta">
<h2 style="margin-bottom:15px;">
Acesso antecipado liberado
</h2>

<p style="color:#444;line-height:1.7;">
Os primeiros usu√°rios est√£o entrando na lista de acesso antecipado
para receber alertas autom√°ticos antes do lan√ßamento oficial.
</p>

<p style="margin-top:15px;font-weight:bold;color:#2563eb;">
Entre agora e receba prioridade no monitoramento.
</p>
</div>

</div>
</div>

<div class="feature-row">

  <div class="feature">
    <h3>üìà Crescimento invis√≠vel</h3>
    <p>Muitos MEIs ultrapassam o limite sem perceber.</p>
  </div>

  <div class="feature">
    <h3>‚ö†Ô∏è Evite impostos inesperados</h3>
    <p>Ultrapassar o limite pode gerar cobran√ßa retroativa.</p>
  </div>

  <div class="feature">
    <h3>üõ°Ô∏è Monitoramento autom√°tico</h3>
    <p>Receba alertas antes que o problema aconte√ßa.</p>
  </div>

</div>


<div class="cta">
<h2>Pare de acompanhar o MEI manualmente</h2>
<p>Deixe o MEI Seguro avisar voc√™ antes de qualquer risco.</p>
<button onclick="abrirModal()">Quero ser avisado antes</button>
</div>

</div>

<footer style="
  margin-top:60px;
  padding:20px;
  font-size:12px;
  color:#777;
  text-align:center;
">
MEI Seguro √© uma ferramenta informativa de monitoramento fiscal.
N√£o prestamos consultoria cont√°bil ou jur√≠dica.
Os resultados apresentados s√£o estimativas e podem variar conforme a legisla√ß√£o vigente.
</footer>

<div id="emailModal" style="
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.6);
justify-content:center;
align-items:center;
z-index:9999;
">


<div style="
background:white;
padding:30px;
border-radius:12px;
text-align:center;
max-width:400px;
position:relative;
z-index:10000;
">


<h2>Evite ultrapassar o limite sem perceber
</h2>

  <p id="resumoModal" style="color:#444; margin-top:10px;"></p>


<form action="https://formspree.io/f/mjgerynj" method="POST">

<input 
type="text"
name="nome"
placeholder="Seu primeiro nome"
required
style="padding:12px;width:90%;margin-top:10px;border-radius:8px;border:1px solid #ccc;"
>

<br><br>

<input 
type="email"
name="email"
placeholder="Seu melhor e-mail"
required
style="padding:12px;width:90%;border-radius:8px;border:1px solid #ccc;"
>

<br><br>

<button type="submit">Quero receber alertas</button>

</form>


<br>

<button onclick="fecharModal()" style="background:none;color:#666;">
Cancelar
</button>

</div>
</div>

<script>
let modalJaExibido = sessionStorage.getItem("modalExibido");

function calcularRiscoMEI(usoPercentual){

  let status;
  let cor;
  let nivel;

  if (usoPercentual < 70){
    status = "seguro";
    cor = "#4CAF50";
    nivel = 1;
  }
  else if (usoPercentual < 90){
    status = "atencao";
    cor = "#F59E0B";
    nivel = 2;
  }
  else if (usoPercentual < 100){
    status = "alto";
    cor = "#EF4444";
    nivel = 3;
  }
  else{
    status = "estouro";
    cor = "#B91C1C";
    nivel = 4;
  }

  return {
    status,
    cor,
    nivel,
    percentual: usoPercentual
  };
}

  
async function analisar(){

 let valor = document.getElementById("valor").value
  .replace(/\D/g,'');

valor = Number(valor) / 100;


  const botao = document.getElementById("botao");
  const loading = document.getElementById("loading");
  const resultado = document.getElementById("resultado");

  if(!valor || valor <= 0){
    alert("Digite um valor v√°lido.");
    return;
  }

  botao.disabled = true;
  botao.innerText = "Analisando...";
  loading.style.display="block";
  executarDiagnosticoIA();

  resultado.innerHTML="";

  try{
    
document.getElementById("diagnosticoIA").style.display = "none";

    const resposta = await fetch(
      "https://radar-mei-api-production.up.railway.app/simular?valor="+valor
    );

    if(!resposta.ok){
      throw new Error("Erro na API");
    }

    const dados = await resposta.json();

    // ===== RADAR FISCAL INTELIGENTE =====

const mesAtual = new Date().getMonth() + 1;
const percentualAno = mesAtual / 12;

const risco = calcularRiscoMEI(dados.percentual_limite);
atualizarRadar(uso);

// ===== CLASSIFICA√á√ÉO √öNICA DO RISCO (FONTE OFICIAL) =====

let riscoTexto;
let cor;

if (uso < 70){
  riscoTexto = "üü¢ Situa√ß√£o segura";
  cor = "#4CAF50";
}
else if (uso < 90){
  riscoTexto = "üü° Aten√ß√£o ao crescimento";
  cor = "#F59E0B";
}
else if (uso < 100){
  riscoTexto = "üî¥ Alto risco fiscal";
  cor = "#EF4444";
}
else{
  riscoTexto = "üö® Limite ultrapassado";
  cor = "#B91C1C";
}
    

let badge = riscoTexto;



    const limiteMEI = 81000;
const restante = Math.max(
  0,
  limiteMEI - dados.projecao_anual
);



    // abrir modal automaticamente se score baixo
if(uso >= 90 && !sessionStorage.getItem("modalExibido")) {


    sessionStorage.setItem("modalExibido", "true");

    // tempo suficiente para leitura do resultado
    setTimeout(() => {

        if(typeof abrirModal === "function"){
            preencherResumoModal(uso, restante);
            abrirModal();
        }

    }, 5000); // 5 segundos
}




    resultado.style.backgroundColor = risco.cor;
    resultado.style.color="white";
 
  loading.style.display = "none"; // ‚Üê ADICIONE ESTA LINHA

  botao.innerText = "‚úÖ An√°lise conclu√≠da";
  botao.style.background = "#16a34a";

  setTimeout(() => {
    botao.innerText = "Analisar risco";
    botao.style.background = "#2563eb";
    botao.disabled = false;
  }, 2200);






 resultado.innerHTML =
  "<div style='font-size:22px;margin-bottom:8px;'>"+badge+"</div>"+
  "Proje√ß√£o anual: "+formatarReal(dados.projecao_anual)+"<br>"+
  "Uso do limite: "+dados.percentual_limite+"%<br><br>"+
  "‚ö†Ô∏è Faltam aproximadamente <b>"+
  formatarReal(restante)+
  "</b> para atingir o limite anual do MEI.";





 

  }catch(e){
    console.error(e);
    resultado.innerHTML="Erro ao consultar API.";
  }

  botao.disabled=false;
  
}

  window.abrirModal = function () {
  const modal = document.getElementById("emailModal");
  if(modal) modal.style.display = "flex";
};

window.fecharModal = function () {
  const modal = document.getElementById("emailModal");
  if(modal) modal.style.display = "none";
};



function preencherResumoModal(score, restante){

  const resumo = document.getElementById("resumoModal");

  resumo.innerHTML =
    "Seu score atual √© <b>"+score+"/100</b>.<br>"+
    "Voc√™ est√° a aproximadamente <b>R$ "+
    formatarReal(restante)
+
    "</b> do limite anual.<br><br>"+
    "Podemos avisar voc√™ automaticamente antes de qualquer risco.";
}
  


  function formatarReal(valor){
  return valor.toLocaleString('pt-BR', {
    style: 'currency',
    currency: 'BRL'
  });
}


  document.addEventListener("DOMContentLoaded", () => {

  const input = document.getElementById("valor");

  if(!input) return;

  input.addEventListener("input", (e) => {

    let numbers = e.target.value.replace(/\D/g, "");

    if(numbers === ""){
      e.target.value = "";
      return;
    }

    let value = (Number(numbers) / 100).toLocaleString("pt-BR", {
      style: "currency",
      currency: "BRL"
    });

    e.target.value = value;
  });

});

function atualizarRadar(percentual){

  const barra = document.getElementById("radarProgress");
  if(!barra) return;

  let posicaoVisual = 0;

  /*
    Nova escala psicol√≥gica:

    Seguro ocupa MUITO mais espa√ßo visual,
    porque √© onde a maioria dos MEIs vive.
  */

  // üü¢ SEGURO (0‚Äì70%) ‚Üí ocupa s√≥ 0‚Äì35% da barra
  if(percentual <= 70){
    posicaoVisual = (percentual / 70) * 35;
  }

  // üü° ATEN√á√ÉO (70‚Äì90%) ‚Üí 35% at√© 65%
  else if(percentual <= 90){
    posicaoVisual = 35 + ((percentual - 70) / 20) * 30;
  }

  // üî¥ RISCO (90‚Äì100%) ‚Üí 65% at√© 85%
  else if(percentual <= 100){
    posicaoVisual = 65 + ((percentual - 90) / 10) * 20;
  }

  // üö® ESTOURO ‚Üí √∫ltimos 15%
  else{
    posicaoVisual = 85 + Math.min(percentual - 100, 20) / 20 * 15;
  }

  barra.style.width = posicaoVisual + "%";
}





function executarDiagnosticoIA(){

  const box = document.getElementById("diagnosticoIA");
  const linhas = document.querySelectorAll(".diag-linha");

  if(!box) return;

  box.style.display = "block";

  linhas.forEach((linha, i) => {
    linha.style.animationDelay = (i * 0.9) + "s";
  });
}

function iniciarContadorMEI(){

  const el = document.getElementById("contadorMEI");
  if(!el) return;

  let base = 18 + Math.floor(Math.random()*12);

  function atualizar(){

    const variacao = Math.floor(Math.random()*5) - 2;
    base = Math.max(12, base + variacao);

    el.innerHTML =
      "üü¢ <b>"+base+" MEIs</b> analisando o limite agora";
  }

  atualizar();
  setInterval(atualizar, 4000);
}

document.addEventListener("DOMContentLoaded", iniciarContadorMEI);
  
  

</script>  
  
</body>
</html>
